[![Release badge](https://github.com/irdkwmnsb/mqtt-in-minecraft/workflows/Handle%20Release/badge.svg)](https://github.com/irdkwmnsb/mqtt-in-minecraft/actions)
[![Test build badge](https://github.com/irdkwmnsb/mqtt-in-minecraft/workflows/Test%20build/badge.svg)](https://github.com/irdkwmnsb/mqtt-in-minecraft/actions)
## Что это такое?
Этот плагин позволяет создавать лампы, которые будут отправлять свой цвет и уровень сигнала по протоколу MQTT  

## Скачать:
https://github.com/irdkwmnsb/mqtt-in-minecraft/releases  
Файл jar-with-dependencies.jar

## Как этим пользоваться? 
### Добавляем mqtt брокер командой  
```/mqttconf [URL] [Password] [Username]```, где [URL] это URL брокера, Password и Username: пароль и логин брокера соответственно.  
Чтобы пользоваться этой комнадой у пользователя должно быть разрешение на mqtt.broker.configure  
  
### Добавляем лампу
Нажать правой кнопкой мыши ярлыком по лампе. Плагин сразу отправит на брокер значение лампы = 0 и цвет = 14 (оранжевый) в каналы [название лампы]/value и [название лампы]/color соответственно  
Все последующие данные будут отправляться в каналы [название лампы]/value и [название лампы]/color  
У пользователя должны быть права на mqtt.lamp.create  

### Красим лампу
ПКМ красителем по лампе. Новое значение красителя отправится на [название лампы]/color  
У пользователя должны быть права на mqtt.lamp.color  

### Удаляем лампу
У пользователя должны быть права на mqtt.lamp.break  

### Команда /mqtt
```/mqtt [channel] [body]```
Позволяет отправлять собственные сообщения на любые каналы брокера.  
У пользователя должны быть права на mqtt.sendmqtt  

## Как это работает
Использует бибилиотеку com.eclipse.paho, обновляется каждый тик игры и проверят, изменилось ли мощность редстоуна на лампе. Если да, отправляет новое значение на [название лампы]/value  
Хранит все свои данные в JSON файле в /plugins/MQTTLamp/lamps.json. Обновляет этот файл при каждом добавлении/удалении/перекраске лампы.  
Пожалуйста не правьте этот файл самостоятельно. Если в файле будет синтаксическая ошибка плагин не сможет запуститься.  
